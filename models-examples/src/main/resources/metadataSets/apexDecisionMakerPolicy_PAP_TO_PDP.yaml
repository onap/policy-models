---
# Representation of apex decision maker policy that will be passed on to the apex-pdp from PAP.
# The metadataSet definition for the metadata reference is added under the metadata field of the policy by PAP.

tosca_definitions_version: tosca_simple_yaml_1_1_0
topology_template:
  policies:
    - operational.apex.decisionMaker:
        type: onap.policies.controlloop.operational.common.apex.decisionMaker
        type_version: 1.0.0
        derived_from: tosca.policies.Root
        name: operational.apex.decisionMaker
        version: 1.0.0
        metadata:
          policyModel:
            key:
              name: DecisionMakerPolicyModel
              version: 0.0.1
            keyInformation:
              key:
                name: DecisionMakerPolicyModel_KeyInfo
                version: 0.0.1
              keyInfoMap:
                entry:
                  - key:
                      name: AnswerAlbum
                      version: 0.0.1
                    value:
                      key:
                        name: AnswerAlbum
                        version: 0.0.1
                      UUID: 4ea21a2c-5dc7-337f-ba13-f427a4ae79a1
                      description: Generated description for concept referred to by key "AnswerAlbum:0.0.1"
                  - key:
                      name: AnswerEvent
                      version: 0.0.1
                    value:
                      key:
                        name: AnswerEvent
                        version: 0.0.1
                      UUID: ce2233b8-bb89-3c5e-a18f-1d13089d2bb6
                      description: Generated description for concept referred to by key "AnswerEvent:0.0.1"
                  - key:
                      name: AnswerInitPolicy
                      version: 0.0.1
                    value:
                      key:
                        name: AnswerInitPolicy
                        version: 0.0.1
                      UUID: c8254064-b171-3ccb-85c0-29b5719ee8fc
                      description: Generated description for concept referred to by key "AnswerInitPolicy:0.0.1"
                  - key:
                      name: AnswerInitTask
                      version: 0.0.1
                    value:
                      key:
                        name: AnswerInitTask
                        version: 0.0.1
                      UUID: 28fb33d2-a4e0-3046-8302-7baf9a2056d1
                      description: Generated description for concept referred to by key "AnswerInitTask:0.0.1"
                  - key:
                      name: DecisionEvent
                      version: 0.0.1
                    value:
                      key:
                        name: DecisionEvent
                        version: 0.0.1
                      UUID: 487acc75-b5a1-3285-90cf-98ecd6fb3500
                      description: Generated description for concept referred to by key "DecisionEvent:0.0.1"
                  - key:
                      name: DecisionMakerPolicy
                      version: 0.0.1
                    value:
                      key:
                        name: DecisionMakerPolicy
                        version: 0.0.1
                      UUID: 9e8dda9a-6f85-311d-842b-00b5b5578edd
                      description: Generated description for concept referred to by key "DecisionMakerPolicy:0.0.1"
                  - key:
                      name: DecisionMakerPolicyModel
                      version: 0.0.1
                    value:
                      key:
                        name: DecisionMakerPolicyModel
                        version: 0.0.1
                      UUID: d7789464-e4d1-382e-8481-fba53fa7b9a9
                      description: Generated description for concept referred to by key "DecisionMakerPolicyModel:0.0.1"
                  - key:
                      name: DecisionMakerPolicyModel_Albums
                      version: 0.0.1
                    value:
                      key:
                        name: DecisionMakerPolicyModel_Albums
                        version: 0.0.1
                      UUID: e5dfbadd-5229-3ad9-996c-eda030ef5dc1
                      description: Generated description for concept referred to by key "DecisionMakerPolicyModel_Albums:0.0.1"
                  - key:
                      name: DecisionMakerPolicyModel_Events
                      version: 0.0.1
                    value:
                      key:
                        name: DecisionMakerPolicyModel_Events
                        version: 0.0.1
                      UUID: b4248202-ff8e-3d45-8b3d-0ed0fd2eaed4
                      description: Generated description for concept referred to by key "DecisionMakerPolicyModel_Events:0.0.1"
                  - key:
                      name: DecisionMakerPolicyModel_KeyInfo
                      version: 0.0.1
                    value:
                      key:
                        name: DecisionMakerPolicyModel_KeyInfo
                        version: 0.0.1
                      UUID: 693b1b29-c4c6-34ba-98e1-bc1a7576f0f8
                      description: Generated description for concept referred to by key "DecisionMakerPolicyModel_KeyInfo:0.0.1"
                  - key:
                      name: DecisionMakerPolicyModel_Policies
                      version: 0.0.1
                    value:
                      key:
                        name: DecisionMakerPolicyModel_Policies
                        version: 0.0.1
                      UUID: 2dee1e42-9caa-32b1-9298-784dcdcb9cae
                      description: Generated description for concept referred to by key "DecisionMakerPolicyModel_Policies:0.0.1"
                  - key:
                      name: DecisionMakerPolicyModel_Schemas
                      version: 0.0.1
                    value:
                      key:
                        name: DecisionMakerPolicyModel_Schemas
                        version: 0.0.1
                      UUID: c256f102-2681-3f35-bbbd-1f4948587e15
                      description: Generated description for concept referred to by key "DecisionMakerPolicyModel_Schemas:0.0.1"
                  - key:
                      name: DecisionMakerPolicyModel_Tasks
                      version: 0.0.1
                    value:
                      key:
                        name: DecisionMakerPolicyModel_Tasks
                        version: 0.0.1
                      UUID: 660cbdba-687d-3a05-ba26-69daf93a8158
                      description: Generated description for concept referred to by key "DecisionMakerPolicyModel_Tasks:0.0.1"
                  - key:
                      name: DitheringAnswerTask
                      version: 0.0.1
                    value:
                      key:
                        name: DitheringAnswerTask
                        version: 0.0.1
                      UUID: da31cee8-2e84-39d2-9337-9ee3bf347c98
                      description: Generated description for concept referred to by key "DitheringAnswerTask:0.0.1"
                  - key:
                      name: LastAnswerAlbum
                      version: 0.0.1
                    value:
                      key:
                        name: LastAnswerAlbum
                        version: 0.0.1
                      UUID: 21399145-3fbe-39a5-b863-8a59a8add4a8
                      description: Generated description for concept referred to by key "LastAnswerAlbum:0.0.1"
                  - key:
                      name: MakeDecisionEvent
                      version: 0.0.1
                    value:
                      key:
                        name: MakeDecisionEvent
                        version: 0.0.1
                      UUID: 02ec632a-aeae-31fe-8f6d-656e1875749f
                      description: Generated description for concept referred to by key "MakeDecisionEvent:0.0.1"
                  - key:
                      name: OptimisticAnswerTask
                      version: 0.0.1
                    value:
                      key:
                        name: OptimisticAnswerTask
                        version: 0.0.1
                      UUID: 818e6b9e-0109-31f5-a95c-17f6fb016027
                      description: Generated description for concept referred to by key "OptimisticAnswerTask:0.0.1"
                  - key:
                      name: PessimisticAnswerTask
                      version: 0.0.1
                    value:
                      key:
                        name: PessimisticAnswerTask
                        version: 0.0.1
                      UUID: 8f4a707e-0d8b-3e09-b921-332f6f81f302
                      description: Generated description for concept referred to by key "PessimisticAnswerTask:0.0.1"
                  - key:
                      name: RandomAnswerTask
                      version: 0.0.1
                    value:
                      key:
                        name: RandomAnswerTask
                        version: 0.0.1
                      UUID: bfb0af88-b454-3b08-911f-7ff2475350bf
                      description: Generated description for concept referred to by key "RandomAnswerTask:0.0.1"
                  - key:
                      name: RoundRobinAnswerTask
                      version: 0.0.1
                    value:
                      key:
                        name: RoundRobinAnswerTask
                        version: 0.0.1
                      UUID: eac6fb59-8aca-3011-b7ba-69875f1db4b6
                      description: Generated description for concept referred to by key "RoundRobinAnswerTask:0.0.1"
                  - key:
                      name: SimpleIntegerType
                      version: 0.0.1
                    value:
                      key:
                        name: SimpleIntegerType
                        version: 0.0.1
                      UUID: ab00a5b8-7edd-340f-8140-4d14f571edfb
                      description: Generated description for concept referred to by key "SimpleIntegerType:0.0.1"
                  - key:
                      name: SimpleStringType
                      version: 0.0.1
                    value:
                      key:
                        name: SimpleStringType
                        version: 0.0.1
                      UUID: 8a4957cf-9493-3a76-8c22-a208e23259af
                      description: Generated description for concept referred to by key "SimpleStringType:0.0.1"
        properties:
          engineServiceParameters:
            name: MyApexEngine
            version: 0.0.1
            id: 45
            instanceCount: 4
            deploymentPort: 12561
            engineParameters:
              executorParameters:
                JAVASCRIPT:
                  parameterClassName: org.onap.policy.apex.plugins.executor.javascript.JavascriptExecutorParameters
              contextParameters:
                parameterClassName: org.onap.policy.apex.context.parameters.ContextParameters
                schemaParameters:
                  Avro:
                    parameterClassName: org.onap.policy.apex.plugins.context.schema.avro.AvroSchemaHelperParameters
                  Java:
                    parameterClassName: org.onap.policy.apex.context.impl.schema.java.JavaSchemaHelperParameters
                    jsonAdapters:
                      Instant:
                        adaptedClass: java.time.Instant
                        adaptorClass: org.onap.policy.controlloop.util.Serialization$GsonInstantAdapter
              taskParameters:
                - key: ParameterKey1
                  value: ParameterValue1
                - taskId: AAILookupTask:0.0.1
                  key: SomeKeyForThisTask
                  value: Value
          eventInputParameters:
            GuardRequestorConsumer:
              carrierTechnologyParameters:
                carrierTechnology: RESTREQUESTOR
                parameterClassName: org.onap.policy.apex.plugins.event.carrier.restrequestor.RestRequestorCarrierTechnologyParameters
                parameters:
                  url: http://111.222.333.444:5555/pdp/api/getDecision
                  httpMethod: POST
                  restRequestTimeout: 2000
                  httpHeader: Authorization:aaaaaaaaa== ClientAuth:bbbbbbbbb=
              eventProtocolParameters:
                eventProtocol: JSON
              eventName: GuardResponseEvent
              eventNameFilter: GuardResponseEvent
              requestorMode: true
              requestorPeer: GuardRequestorProducer
              requestorTimeout: 500
            DCAEConsumer:
              carrierTechnologyParameters:
                carrierTechnology: RESTCLIENT
                parameterClassName: org.onap.policy.apex.plugins.event.carrier.restclient.RestClientCarrierTechnologyParameters
                parameters:
                  url: http://message-router:3904/events/unauthenticated.DCAE_CL_OUTPUT/APEX/1?timeout=60000
              eventProtocolParameters:
                eventProtocol: JSON
                parameters:
                  nameAlias: closedLoopControlName
                  versionAlias: version
                  sourceAlias: from
                  pojoField: VirtualControlLoopEvent
              eventName: ControlLoop-vCPE-48f0c2c3-a172-4192-9ae3-052274181b6e
            APPCConsumer:
              carrierTechnologyParameters:
                carrierTechnology: RESTCLIENT
                parameterClassName: org.onap.policy.apex.plugins.event.carrier.restclient.RestClientCarrierTechnologyParameters
                parameters:
                  url: http://message-router:3904/events/APPC-LCM-WRITE/APEX/1?timeout=60000
              eventProtocolParameters:
                eventProtocol: JSON
                parameters:
                  versionAlias: version
                  pojoField: APPCLCMResponseEvent
              eventName: APPCRestartVNFResponseEvent
              eventNameFilter: APPCRestartVNFResponseEvent
          eventOutputParameters:
            logProducer:
              carrierTechnologyParameters:
                carrierTechnology: FILE
                parameters:
                  fileName: "/tmp/VCPEEventsOut.json"
              eventProtocolParameters:
                eventProtocol: JSON
            GuardRequestorProducer:
              carrierTechnologyParameters:
                carrierTechnology: RESTREQUESTOR
                parameterClassName: org.onap.policy.apex.plugins.event.carrier.restrequestor.RestRequestorCarrierTechnologyParameters
              eventProtocolParameters:
                eventProtocol: JSON
              eventNameFilter: GuardRequestEvent
              requestorMode: true
              requestorPeer: GuardRequestorConsumer
              requestorTimeout: 500
            APPCProducer:
              carrierTechnologyParameters:
                carrierTechnology: RESTCLIENT
                parameterClassName: org.onap.policy.apex.plugins.event.carrier.restclient.RestClientCarrierTechnologyParameters
                parameters:
                  url: http://message-router:3904/events/APPC-LCM-READ
              eventProtocolParameters:
                eventProtocol: JSON
                parameters:
                  versionAlias: version
                  sourceAlias: from
                  pojoField: APPCLCMRequestEvent
              eventNameFilter: APPCRestartVNFRequestEvent
            PolicyLogProducer:
              carrierTechnologyParameters:
                carrierTechnology: RESTCLIENT
                parameterClassName: org.onap.policy.apex.plugins.event.carrier.restclient.RestClientCarrierTechnologyParameters
                parameters:
                  url: http://message-router:3904/events/POLICY-CL-MGT
              eventProtocolParameters:
                eventProtocol: JSON
                parameters:
                  versionAlias: version
                  sourceAlias: from
                  pojoField: VirtualControlLoopNotification
              eventNameFilter: ControlLoopLogEvent
